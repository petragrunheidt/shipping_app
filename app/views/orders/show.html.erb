<h1><%= "#{Order.model_name.human} #{@order.code}" %></h1>
<div tag="order-info">
<dl>
<h3>Informações do Fornecedor</h3>
<dt><%= Order.human_attribute_name('takeout_address') %>: <%= @order.takeout_address %></dt>
<dt>Peso: <%= @order.weight %>kg</dt>
<dt>Dimensões: <%= "#{@order.heigth}x#{@order.width}x#{@order.depth}cm" %></dt>
<h3>Informações do Cliente</h3>
<dt><%= Order.human_attribute_name('name') %>: <%= @order.name %></dt>
<dt><%= Order.human_attribute_name('email') %>: <%= @order.email %></dt>
<dt><%= Order.human_attribute_name('customer_id') %>: <%= @order.customer_id  %></dt>
<dt><%= Order.human_attribute_name('delivery_address') %>: <%= @order.delivery_address %></dt>

<p><%= Order.human_attribute_name('total_distance') %>: <%= @order.total_distance %>km</p>
<p><%= Order.human_attribute_name('status') %>: <%= t(@order.status) %>
<% if @order.order_end.present? %>
<%= @order.order_end.reason.present? ? "(com atraso)" : "(no prazo)" %>
<% end %>
</p>
</dl>

</div>
<div tag="pending-buttons">
<% if @order.pending? and current_user.present? %>
<% if current_user.admin %>
<p><%= link_to 'Editar Ordem de Serviço', edit_order_path(@order) %></p>
<% end %>
<p><%= link_to 'Iniciar Ordem de Serviço', new_order_order_start_path(@order) %></p>
<% end %>
</div>

<div tag="waiting-confirmation">
<% if @order.order_start.present? %>
<h3>Dados de Entrega</h3>
<dl>

<dt>Modo de Transporte: <%= @order.order_start.transport_mode.name %><dt>
<dt>Veículo: <%= @order.order_start.vehicle.full_description %><dt>
<dt><%= "#{OrderStart.human_attribute_name('shipping_fee')}: #{number_to_currency(@order.order_start.shipping_fee, locale: 'pt-BR')}" %></dt>
<dt><%= "#{OrderStart.human_attribute_name('order_date')}: #{I18n.localize(@order.order_start.order_date)}" %></dt>
<dt><%= "#{OrderStart.human_attribute_name('delivery_deadline')}: #{I18n.localize(@order.order_start.delivery_deadline)}" %></dt>
<dl>
<% if @order.waiting_confirmation? and current_user.present? %>
<p><%= button_to 'Confirmar Ordem de Serviço', order_confirmation_order_path, { method: 'patch'} %>
<%= button_to 'Reconfigurar Ordem de Serviço', order_order_start_path(@order.order_start), { method: 'delete' }%>
</p>
<% end %>
<% end %>
</div>

<div tag="on_route-buttons">
<% if @order.on_route? and current_user.present? %>
<p><%= link_to 'Finalizar Ordem de Serviço', new_order_order_end_path(@order) %></p>
<% if current_user.admin %>
<p><%= button_to 'Marcar como Cancelada', set_canceled_order_path, { method: 'patch'} %></p>
<% end %>
<% end %>
</div>

<div tag="delivered-order">
<% if @order.delivered? %>
<h3>Pedido Finalizado</h3>
<p>Pedido entregue em <%= I18n.localize(@order.order_end.time) %></p>
<p><%= "Motivo do Atraso: #{@order.order_end.reason}" if @order.order_end.reason.present? %></p>
<% end %>
</div>

<%= link_to 'Voltar', orders_path %>

